<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta property="og:type" content="website">
<meta property="og:title" content="Jasonfu's Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Jasonfu's Blog">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Jasonfu's Blog">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>

  <title> Jasonfu's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Jasonfu's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/15/stock-tech-index/" itemprop="url">
                  stock-tech-index
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-15T14:27:37+08:00" content="2016-09-15">
              2016-09-15
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/09/15/stock-tech-index/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/15/stock-tech-index/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="股票投资分析方法"><a href="#股票投资分析方法" class="headerlink" title="股票投资分析方法"></a>股票投资分析方法</h1><p>目前，股票投资的分析方法主要包含三种：基本分析、技术分析和演化分析。<a href="[基本分析](http://baike.baidu.com/view/35286.htm)">^1</a></p>
<ul>
<li><p>基本分析（Fundamental Analysis）：以企业的内在价值作为主要研究对象，从决定企业内在的价值和影响股票价格的宏观经济形势、行业发展前景、企业经营状况等方面入手，进行详尽分析以大概测算上市公司的长期投资价值和安全边际，并与当前的股票价格进行比较，形成相应的投资建议。</p>
</li>
<li><p>技术分析（Technical Analysis）：以股票价格涨跌的直观行为表现作为主要研究对象，以预测股价波动形态和趋势为主要目的，从股价变化的K线图表与技术指标入手，对股市波动规律进行分析的方法总和。</p>
</li>
<li><p>演化分析（Evolutionary Analysis）：以股市波动的生命运动内在属性作为主要研究对象，从股市的代谢性、趋利性、适应性、可塑性、应激性、变异性、节律性等方面入手（生物学或达尔文范式），对市场波动方向与空间进行动态跟踪研究，为股票交易决策提供机会和风险评估的方法总和。</p>
</li>
</ul>
<h1 id="股票技术指标"><a href="#股票技术指标" class="headerlink" title="股票技术指标"></a>股票技术指标</h1><p>股票技术指标是进行股票投资技术分析时所依据的指标，其主要内容是由股价、成交量或涨跌指数等数据计算而来。</p>
<p>股票技术指标是属于统计学的范畴，一切以数据来论证股票趋向、买卖等。指标主要分为了3大类：</p>
<ol>
<li>属于趋向类的技术指标</li>
<li>属于强弱的技术指标</li>
<li>属于随机买入的技术指标</li>
</ol>
<p>在对常用的几个技术指标进行开发的过程中，发现网上广外流传的对于部分指标的计算方法的描述并不清晰，且个别有误。现将CCI、KDJ、RSI、W%R以及MACD等几个常用技术指标的计算方法进行总结说明。</p>
<h1 id="常用技术指标的计算方法"><a href="#常用技术指标的计算方法" class="headerlink" title="常用技术指标的计算方法"></a>常用技术指标的计算方法</h1><h2 id="CCI：顺势指标"><a href="#CCI：顺势指标" class="headerlink" title="CCI：顺势指标"></a>CCI：顺势指标</h2><p>CCI指标是美国股市技术分析家唐纳德·蓝伯特(Donald Lambert)于20世纪80年代提出的，专门测量股价、外汇或者贵金属交易是否已超出常态分布范围。属于超买超卖类指标中较特殊的一种。其值波动于正无穷大和负无穷大之间，因此不会出现指标钝化现象，适用于短期的行情研判。</p>
<p>以日CCI计算为例，一般采用的计算方法如下：</p>
<p><img src="/img/sti1.png" alt="CCI计算第一步" title="CCI计算第一步"></p>
<p><img src="/img/sti2.png" alt="CCI计算第二步" title="CCI计算第二步"></p>
<p><img src="/img/sti3.png" alt="CCI计算第三步" title="CCI计算第三步"></p>
<p><img src="/img/sti4.png" alt="CCI计算第四步" title="CCI计算第四步"></p>
<p>其中：</p>
<blockquote>
<ul>
<li>H<sub>i</sub>：第i天的最高价</li>
<li>L<sub>i</sub>：第i天的最低价</li>
<li>C<sub>i</sub>：第i天的收盘</li>
<li>MATP(n)<sub>t</sub>：最近n日TP的移动平均线</li>
<li>meanDev(n)<sub>t</sub>：最近n日TP的一阶均差</li>
<li>α = 0.015 为计算系数，n的计算周期一般取14。</li>
</ul>
</blockquote>
<h2 id="KDJ：随机指标"><a href="#KDJ：随机指标" class="headerlink" title="KDJ：随机指标"></a>KDJ：随机指标</h2><p>随机指标，是一种相当新颖、实用的技术分析指标，它起先用于期货市场的分析，后被广泛用于股市的中短期趋势分析，是期货和股票市场上最常用的技术分析工具。</p>
<p>随机指标KDJ一般是用于股票分析的统计体系，根据统计学原理，通过一个特定的周期（常为9日、9周等）内出现过的最高价、最低价及最后一个计算周期的收盘价及这三者之间的比例关系，来计算最后一个计算周期的未成熟随机值RSV，然后根据平滑移动平均线的方法来计算K值、D值与J值，并绘成曲线图来研判股票走势。</p>
<p>以日KDJ计算为例，一般采用的计算方法如下：</p>
<blockquote>
<ul>
<li>AX = 当日的收盘价 - 9天中的最低价</li>
<li>BX = 9天中的最高价 - 9天中的最低价</li>
<li>RSV = AX ÷ BX × 100</li>
<li>当日K值 ＝ 2／3前一日K值 + 1/3当日的RSV</li>
<li>当日D值 ＝ 1／3当日K值 + 2/3前一日D值</li>
<li><p>J值 = 3D - 2K</p>
<p>注：第一次计算时，前一日的K、D一律以50代替。 </p>
</li>
</ul>
</blockquote>
<h2 id="RSI：相对强弱指标"><a href="#RSI：相对强弱指标" class="headerlink" title="RSI：相对强弱指标"></a>RSI：相对强弱指标</h2><p>RSI (Relative Strength Index) 强弱指标是由威尔斯.威尔德（Welles Wilder)最早应用于期货买卖，后来人们发现在众多的图表技术分析中，强弱指标的理论和实践极其适合于股票市场的短线投资，于是被用于股票升跌的测量和分析中，是一个比较常用的中短线指标。</p>
<p>相对强弱指数RSI是根据一定时期内上涨点数和涨跌点数之和的比率制作出的一种技术曲线。能够反映出市场在一定时期内的景气程度。</p>
<p>以日RSI计算为例，一般采用的计算方法如下：</p>
<blockquote>
<ul>
<li>RSI  = 100 - 100 / (1 + RS)</li>
<li>RS = Average Gain / Average Loss</li>
</ul>
</blockquote>
<p>以12日的计算周期为例，第一次计算时：</p>
<blockquote>
<ul>
<li>Average Gain = 过去12日的收盘涨幅之和</li>
<li>Average Loss = 过去12日的收盘跌幅之和（取正值）</li>
</ul>
<p>其中，涨跌幅的计算是用每一天的收盘价减去上一天的收盘价。当计算周期为12日时，需取出过去13天的收盘价数据，通过按顺序相减得到12个涨跌幅数据。</p>
</blockquote>
<p>之后每次Average Gain和Average Loss的计算需要基于上一次的值（使用了平滑技术），计算公式如下：</p>
<blockquote>
<ul>
<li>Average Gain = (previous Average Gain * 11 + current Gain) / 12</li>
<li>Average Loss = (previous Average Loss * 11 + current Loss) / 12</li>
</ul>
</blockquote>
<h2 id="W-R：威廉指标"><a href="#W-R：威廉指标" class="headerlink" title="W%R：威廉指标"></a>W%R：威廉指标</h2><p>威廉指标表示的涵义是当天的收盘价在过去一段日子的全部价格范围内所处的相对位置，是一种兼具超买超卖和强弱分界的技术指标。它主要的作用在于辅助其他指标确认讯号。</p>
<p>威廉指标是一个分析市场短期行情走势的技术指标。</p>
<p>以日W%R计算为例，一般采用的计算方法如下：</p>
<blockquote>
<ul>
<li>n日W%R = [(H<sub>n</sub> - C<sub>t</sub>) ÷ (H<sub>n</sub> - L<sub>n</sub>) × 100</li>
<li>H<sub>n</sub> ＝ n日内出现的最高价（包括当天）</li>
<li>L<sub>n</sub> ＝ n日内出现的最低价（包括当天）</li>
<li>C<sub>t</sub> ＝ 当天收盘价</li>
</ul>
</blockquote>
<h2 id="MACD：指数平滑异同平均线"><a href="#MACD：指数平滑异同平均线" class="headerlink" title="MACD：指数平滑异同平均线"></a>MACD：指数平滑异同平均线</h2><p>MACD指标主要是利用长短期二条平滑平均线，计算两者之间的差离值（由快的指数移动平均线（EMA12）减去慢的指数移动平均线（EMA26）得到快线DIF）。该指标可以去除掉移动平均线经常出现的假讯号，又保留了移动平均线的优点。</p>
<p>由于MACD指标对价格变动的灵敏度不高，属于中长线指标，所以在盘整行情中不适用。 </p>
<p>以日MACD计算为例，一般采用的计算方法如下：</p>
<blockquote>
<ul>
<li>快速平滑移动线（12日） EMA（12） = 前一日EMA（12）<em> 11 / (12 + 1) + 今日收盘价 </em> 2 / (12 + 1)</li>
<li>慢速平滑移动平均线（26日） EMA（26） = 前一日EMA（26）<em> 25 / (26 + 1) + 今日收盘价 </em> 2 / (26 + 1)</li>
<li>DIF = EMA（12） - EMA（26）</li>
<li>DEA = （前一日DEA * 8/10 + 今日DIF X 2/10）</li>
<li>MACD = （ DIF - DEA ） * 2</li>
</ul>
</blockquote>
<p>其中：</p>
<blockquote>
<ul>
<li>EMA：可以将第一天的收盘价或者最近N天的收盘价平均值作为初始值。</li>
<li>前一日DEA初始值取前一日DIF值。通常 N＝9。</li>
</ul>
</blockquote>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/14/weighted-moving-average-data-augment/" itemprop="url">
                  一种基于加权移动平均的数据扩充方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-14T20:06:47+08:00" content="2016-08-14">
              2016-08-14
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/08/14/weighted-moving-average-data-augment/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/08/14/weighted-moving-average-data-augment/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="问题背景"><a href="#问题背景" class="headerlink" title="问题背景"></a>问题背景</h1><p>在做分析建模时，经常会遇到样本稀少的情况，例如上市企业的财报数据，每个季度发布一次，如果一家企业到目前为止上市了三年，那它的实际样本数量也就12条，使用这种如此小数量级的样本量来进行建模会导致模型存在稳定性差、过拟合、泛化能力差等风险。所以有必要对样本进行扩充。</p>
<p>对样本进行扩充的方法比较多，譬如根据样本的实际分布使用相关模型进行数据模拟，或者使用Bootstrapping方法对样本进行有放回采样，又或者借鉴缺失值处理的方法对样本进行扩充，等等。在使用深度学习对图片数据集进行训练的时候，为了增加训练数据，常常会对图片做左右翻转、剪切、缩放、翻转等相关操作以扩充样本。</p>
<p>然而上述这些方法并不是任何场景都适用，还是以上市企业的财报预测为例。假设所预测的目标变量是上市企业的净营收，目标企业的上市时间为3年，那总共也就12个样本，且样本是随时间变化的序列，时间粒度为季度。此时使用上述方法进行样本扩充会存在很多的问题，譬如使用相关模型进行数据模拟，会让本来数量太少而不具代表性的样本加入更多的不确定因素，导致预测的失真；企业的净营收数据是一个时间序列，使用Bootstrapping进行有放回采样也不合理；想借助深度学习的例子进行样本扩充更是无从下手。</p>
<h1 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h1><p>或许可以换一种思路来进行样本扩充。原先样本的时间粒度为季度，是否可以将时间粒度缩小为天或者其他比季度小的时间粒度来进行样本扩充，同时保持数据不失真呢？答案是肯定的。</p>
<p>可以借鉴时间序列预测中的加权移动平均法的思想来对样本进行扩充。假设某企业从2013年到2015年这三年每个季度财报公布的净营收分别为：20、25、27、36、28、40、45、56、53、63、69、76，单位为亿元，对应的季度从2013年Q1到2015年Q4，该企业的净营收趋势如图1所示：</p>
<p><img src="/img/da1.jpg" alt="净营收趋势图" title="图1 净营收趋势图（按季度）"></p>
<p>现在将上述按季度计算的净营收数据扩充为按天计算的净营收数据，计算公式为：</p>
<p><img src="/img/da2.jpg" alt="数据扩充公式" title="数据扩充公式"></p>
<p>其中，公式各个参数的定义如下：</p>
<blockquote>
<ul>
<li>dr：当前日期的净营收</li>
<li>preQuarRev：上一季度的净营收</li>
<li>quarInterDays：当前季度最后一天与上一季度最后一天之间间隔的天数</li>
<li>currentDay：当前计算的日期</li>
<li>preQuarEndDay：上一季度最后一天的日期</li>
<li>curQuarRev：当前季度的净营收</li>
<li>currentDay-preQuarEndDay：当前日期与上一季度最后一天间隔的天数</li>
</ul>
</blockquote>
<p>从上述公式可以看出，所计算的日期越接近上一季度，上一季度的净营收对结果计算的影响权重越大；越远离上一季度，则当前季度的净营收对结果计算的影响权重越大。</p>
<p>以一个具体的例子说明公式的应用。如果计算的日期为2015年12月12日，则有</p>
<blockquote>
<ul>
<li>preQuarRev = 69 (2015Q3)</li>
<li>quarInterDays = 92 (2015Q4最后一天2015.12.31与2015Q3最后一天2015.09.30之间间隔的天数)</li>
<li>currentDay = 2015.12.12</li>
<li>preQuarEndDay = 2015.09.30</li>
<li>curQuarRev = 76 (2015Q4，2015.12.12属于Q4)</li>
<li>currentDay - preQuarEndDay = 73 (2015.12.12和2015.09.30之间间隔的天数)</li>
</ul>
</blockquote>
<p>将各个参数值代入公式，计算可得到：dr = 0.8104 (亿元)，也即是说，使用该数据扩充方法之后，2015年12月12日的净营收数据为0.8104 (亿元)。</p>
<p>该公式计算的python伪代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"> <span class="comment"># dateList：季度列表。将季度表示为日期形式，取季度的最后一天表示该季度，如2015年第四季度表示为20151231。列表中的日期从小到大排序</span></div><div class="line"> <span class="comment"># vList：净营收列表。对应季度列表排序。</span></div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(len(dateList)):</div><div class="line">	<span class="keyword">if</span> i &lt; len(dateList) - <span class="number">1</span>:</div><div class="line">		startDate = datetime.datetime.strptime(dateList[i], <span class="string">'%Y%m%d'</span>)</div><div class="line">		lastDate = datetime.datetime.strptime(dateList[i + <span class="number">1</span>], <span class="string">'%Y%m%d'</span>)</div><div class="line">		nDays = (lastDate - startDate).days</div><div class="line"></div><div class="line">		<span class="keyword">for</span> j <span class="keyword">in</span> range(nDays):</div><div class="line">			currentDate = startDate + datetime.timedelta(days = j)</div><div class="line">			currentDayStr = currentDate.strftime(<span class="string">'%Y%m%d'</span>)</div><div class="line">			currentValue = ((nDays - j) / nDays) * vList[i] / nDays + (j / nDays) * vList[i + <span class="number">1</span>] / nDays</div><div class="line">			<span class="keyword">print</span> currentDayStr + <span class="string">'\t'</span> + str(round(currentValue, <span class="number">6</span>))</div></pre></td></tr></table></figure>
<p>对原先的12条样本进行扩充之后，样本量达到了1005条，该时间粒度为天的净营收样本数据的趋势如图2所示：</p>
<p><img src="/img/da3.jpg" alt="净营收趋势图" title="图3 净营收趋势图（按天）"></p>
<p>对比图1和图3可以看出，除了时间粒度有差异之外，扩充之后的样本基本保存了原先样本的所有信息。</p>
<p>当然，使用这种方法扩充样本之后，模型的目标变量（净营收）的时间粒度就从季度变成了天，对应的相关特征数据也需要整理为天的粒度。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/18/poisson-predict-football/" itemprop="url">
                  如何使用泊松分布预测足球比赛的结果
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-07-18T23:06:04+08:00" content="2016-07-18">
              2016-07-18
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/07/18/poisson-predict-football/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/18/poisson-predict-football/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一、什么是泊松分布"><a href="#一、什么是泊松分布" class="headerlink" title="一、什么是泊松分布"></a>一、什么是泊松分布</h1><p>泊松分布（Poisson distribution）是一种统计与概率学里常见到的离散概率分布，用于描述单位时间内随机事件发生的次数。如某医院平均每小时出生的婴儿个数，某网站平均每分钟的访问次数等。在我们接下来将要进行的预测中，对于足球比赛对阵双方，任一球队在90分钟常规时间内的进球数也是近似地服从泊松分布。</p>
<p>泊松分布的概率函数为：</p>
<p><img src="/img/poission.png" alt="poission"></p>
<p>其中，λ≥0，表示事件的频率，即单位时间内随机事件的平均发生率；k∈{0,1,2,3…}，表示随机事件的实际发生次数；e是自然常数。泊松分布的期望（均值）和方差相等，均为λ。泊松分布属于指数分布族，对应的泊松回归是广义线性模型的一种，其连接函数为log函数，也即是说，其因变量Y和自变量X之间的关系为：</p>
<p><img src="/img/glm_formula.png" alt="glm_formula"></p>
<h1 id="二、预测过程"><a href="#二、预测过程" class="headerlink" title="二、预测过程"></a>二、预测过程</h1><h2 id="1-数据整理"><a href="#1-数据整理" class="headerlink" title="1. 数据整理"></a>1. 数据整理</h2><p>由于一支球队在一场足球比赛中的进球数近似地服从泊松分布，所以我们就能用泊松回归来预测一支球队在某一场比赛中的平均进球数，以此来计算该球队的不同进球数的概率大小，并由此可以预测比赛不同结果的概率。</p>
<p>假设用来建模的数据是上届欧洲杯的比赛数据，每一条记录包含了对阵的球队双方、比赛结果以及对应比赛的赔率，原始数据格式如图1所示：<br><img src="/img/pic1.png" alt="pic1" title="图1 原始数据格式"></p>
<p>从左到右对应的字段分别为：主队、客队、主队进球数、客队进球数、主胜赔率、平局赔率、客胜赔付率。</p>
<p>为了将数据可以放到模型中进行建模，需要对数据做一些处理。将每一条比赛记录拆分为两条，把进球数作为预测的目标变量，赔率作为因变量，并增加一个标识主客队的字段添加到因变量，处理完的数据格式如图2所示：</p>
<p><img src="/img/pic2.png" alt="pic2" title="图2 处理后的数据格式"></p>
<h2 id="2-比分预测"><a href="#2-比分预测" class="headerlink" title="2. 比分预测"></a>2. 比分预测</h2><p>清洗完数据，我们就可以开始建模了。可以使用R中的glm()函数来拟合泊松回归模型。加载数据并进行模型拟合的代码如下所示：<br><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"> <span class="comment"># 加载数据</span></div><div class="line">data_train = read.table(<span class="string">"data/odds_score.txt"</span>, header = <span class="literal">FALSE</span>, sep = <span class="string">"\t"</span>,</div><div class="line"> col.names=c(<span class="string">"isHome"</span>, <span class="string">"homeWinOdd"</span>, <span class="string">"drawOdd"</span>, <span class="string">"awayWinOdd"</span>, <span class="string">"score"</span>),</div><div class="line"> na.strings = <span class="string">"NA"</span>,</div><div class="line"> colClasses = c(<span class="string">"numeric"</span>, <span class="string">"numeric"</span>, <span class="string">"numeric"</span>, <span class="string">"numeric"</span>, <span class="string">"integer"</span>)</div><div class="line">)</div><div class="line"> </div><div class="line"> <span class="comment"># 模型拟合</span></div><div class="line">model &lt;- glm(score ~ isHome + homeWinOdd + drawOdd + awayWinOdd, family=poisson(link=log), data=data_train)</div></pre></td></tr></table></figure></p>
<p>具体模型拟合和效果评估的过程在这里不作详述。在构建完模型之后，就可以对比赛进行预测，以预测法国队（主）和葡萄牙队（客）的决赛为例。在比赛开始之前，从网上得到的平均欧盘赔率为：2.02（主胜）, 3.10（平局）, 4.38（客胜），则使用泊松回归模型进行预测的代码如下：<br><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"> <span class="comment"># 法国队的平均进球数</span></div><div class="line">predict(model, data.frame(isHome=<span class="number">1</span>, homeWinOdd=<span class="number">2.02</span>, drawOdd=<span class="number">3.10</span>, awayWinOdd= <span class="number">4.38</span>), type=<span class="string">"response"</span>)</div><div class="line"> </div><div class="line"> <span class="comment"># 葡萄牙队的平均进球数</span></div><div class="line">predict(model, data.frame(isHome=<span class="number">0</span>, homeWinOdd=<span class="number">2.02</span>, drawOdd=<span class="number">3.10</span>, awayWinOdd= <span class="number">4.38</span>), type=<span class="string">"response"</span>)</div></pre></td></tr></table></figure></p>
<p>预测的结果分别是：1.276429（法国队），1.006961（葡萄牙队）。模型预测的结果是一个期望值，也即是在本场比赛的平均进球数，不能直接用来作为所预测球队在比赛的进球结果，需要将其代入泊松分布的概率函数（公式1）计算球队的各种进球结果的概率。以法国队为例，将λ=1.276429，不同的进球结果k（0-5）代入公式1，可以得到如图3所示的结果：</p>
<p><img src="/img/pic3.png" alt="pic3" title="图3 法国队的各种进球结果的概率"></p>
<p>同理，我们可以得到葡萄牙队的进球概率：</p>
<p><img src="/img/pic4.png" alt="pic4" title="图4 葡萄牙队的各种进球结果的概率"></p>
<p>基于图3和图4，我们就可以预测比赛的不同比分结果的概率了，如图5所示：</p>
<p><img src="/img/pic5.png" alt="pic5" title="图5 比赛不同比分结果的概率"></p>
<p>其中，“1:1”比分的概率就是将法国队进一球的概率乘以葡萄牙队进一球的概率，以此类推。</p>
<h2 id="3-胜负平预测"><a href="#3-胜负平预测" class="headerlink" title="3. 胜负平预测"></a>3. 胜负平预测</h2><p>预测比赛对阵双方胜负平结果的概率，其实就是预测双方的进球差（主队进球数减去客队进球数）概率，有三种情况：进球差 &gt; 0 （主队进球数 &gt; 客队进球数）、进球差 = 0（主队进球数 = 客队进球数）以及进球差 &lt; 0（主队进球数 &lt; 客队进球数）。</p>
<p>可以使用skellam分布（Skellam distribution）来预测上述结果。Skellam分布是两个独立Poisson分布随机变量差的分布，在假设对阵双方的进球数是相互独立的前提下，我们可以计算双方进球差（随机变量差）的概率。计算代码如下：  </p>
<pre><code class="r"><span class="keyword">require</span>(<span class="string">'skellam'</span>)

 <span class="comment"># 葡萄牙队胜:0.2926639</span>
sum(dskellam(-<span class="number">50</span>:-<span class="number">1</span>, <span class="number">1.276429</span>, <span class="number">1.006961</span> ))

 <span class="comment"># 平局: 0.2815831</span>
sum(dskellam(<span class="number">0</span>, <span class="number">1.276429</span>, <span class="number">1.006961</span> ))

 <span class="comment"># 法国队胜: 0.4257531</span>
sum(dskellam(<span class="number">1</span>:<span class="number">50</span>, <span class="number">1.276429</span>, <span class="number">1.006961</span> ))
</code></pre>
<p>计算的结果是，法国队取胜的概率为0.4257531，葡萄牙队取胜的概率为0.2926639，打平的概率为0.2815831。这与比赛的实际结果相差甚远，在实际的预测使用中，需要结合比分预测等进行综合考虑判断，虽然这个判断过程充满了无数的运气成分，哈哈！</p>
<h1 id="三、结语"><a href="#三、结语" class="headerlink" title="三、结语"></a>三、结语</h1><p>对足球比赛的结果进行预测，数据很重要，模型很重要，如果非得说出个具体的重要性，那就是：七分靠数据，三分靠模型，剩下的九十分靠运气。哈哈！</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/29/spark-mllib-fast-in-action/" itemprop="url">
                  Spark MLlib机器学习算法快速实践
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-29T15:09:22+08:00" content="2016-02-29">
              2016-02-29
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/29/spark-mllib-fast-in-action/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/29/spark-mllib-fast-in-action/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>MLlib是Spark的机器学习算法库，实现了协同过滤、分类回归、聚类、关联规则、降维、特征抽取等方面的算法，功能丰富，使用起来简单方便，而且计算效率高，目前得到了广泛的使用，发展迅速。</p>
<p>下面以一个逻辑回归的例子说明如何使用MLlib的机器学习算法，代码如下：<br><figure class="highlight scala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.jasonfu.ml</div><div class="line"> </div><div class="line"><span class="keyword">import</span> org.apache.spark.mllib.classification.<span class="type">LogisticRegressionWithSGD</span></div><div class="line"><span class="keyword">import</span> org.apache.spark.mllib.linalg.<span class="type">Vectors</span></div><div class="line"><span class="keyword">import</span> org.apache.spark.mllib.regression.<span class="type">LabeledPoint</span></div><div class="line"><span class="keyword">import</span> org.apache.spark.&#123;<span class="type">SparkConf</span>, <span class="type">SparkContext</span>&#125;</div><div class="line"><span class="keyword">import</span> org.apache.spark.mllib.evaluation.<span class="type">BinaryClassificationMetrics</span></div><div class="line"> </div><div class="line"><span class="comment">/**</span></div><div class="line">   * Created by jasonfu on 2016/2/25.</div><div class="line">   * Description：调用mllib的逻辑回归算法</div><div class="line">   */</div><div class="line">   </div><div class="line"><span class="class"><span class="keyword">object</span> <span class="title">LRModelTest</span> </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]) = &#123;</div><div class="line"> </div><div class="line">    <span class="keyword">val</span> conf = <span class="keyword">new</span> <span class="type">SparkConf</span>().setAppName(<span class="string">s"LogisticRegressionModel Test"</span>)</div><div class="line">    <span class="keyword">val</span> sc = <span class="keyword">new</span> <span class="type">SparkContext</span>(conf)</div><div class="line"> </div><div class="line">    <span class="keyword">val</span> numIterations = <span class="number">10</span>  <span class="comment">// 最大迭代次数</span></div><div class="line">    <span class="keyword">val</span> splitRatioArray = <span class="type">Array</span>(<span class="number">0.7</span>, <span class="number">0.3</span>) <span class="comment">// 切分比例</span></div><div class="line"> </div><div class="line">    <span class="keyword">val</span> oriDataSet = <span class="type">List</span>(</div><div class="line">      <span class="type">LabeledPoint</span>(<span class="number">0</span>, <span class="type">Vectors</span>.dense(<span class="number">0.0</span>, <span class="number">0.0</span>, <span class="number">0.0</span>)),</div><div class="line">      <span class="type">LabeledPoint</span>(<span class="number">1</span>, <span class="type">Vectors</span>.dense(<span class="number">0.1</span>, <span class="number">0.1</span>, <span class="number">0.1</span>)),</div><div class="line">      <span class="type">LabeledPoint</span> (<span class="number">1</span>, <span class="type">Vectors</span>.dense(<span class="number">0.2</span>, <span class="number">0.2</span>, <span class="number">0.2</span>)),</div><div class="line">      <span class="type">LabeledPoint</span>(<span class="number">1</span>, <span class="type">Vectors</span>.dense(<span class="number">9.0</span>, <span class="number">9.0</span>, <span class="number">9.0</span>)),</div><div class="line">      <span class="type">LabeledPoint</span>(<span class="number">0</span>, <span class="type">Vectors</span>.dense(<span class="number">9.1</span>, <span class="number">9.1</span>, <span class="number">9.1</span>)),</div><div class="line">      <span class="type">LabeledPoint</span>(<span class="number">1</span>, <span class="type">Vectors</span>.dense(<span class="number">9.2</span>, <span class="number">9.2</span>, <span class="number">9.2</span>)),</div><div class="line">      <span class="type">LabeledPoint</span>(<span class="number">0</span>, <span class="type">Vectors</span>.dense(<span class="number">0.2</span>, <span class="number">1.6</span>, <span class="number">3.0</span>)),</div><div class="line">      <span class="type">LabeledPoint</span>(<span class="number">1</span>, <span class="type">Vectors</span>.dense(<span class="number">0.1</span>, <span class="number">0.1</span>, <span class="number">0.1</span>)),</div><div class="line">      <span class="type">LabeledPoint</span> (<span class="number">1</span>, <span class="type">Vectors</span>.dense(<span class="number">3.2</span>, <span class="number">6.2</span>, <span class="number">1.2</span>)),</div><div class="line">      <span class="type">LabeledPoint</span>(<span class="number">1</span>, <span class="type">Vectors</span>.dense(<span class="number">2.0</span>, <span class="number">4.0</span>, <span class="number">3.0</span>)),</div><div class="line">      <span class="type">LabeledPoint</span>(<span class="number">0</span>, <span class="type">Vectors</span>.dense(<span class="number">1.1</span>, <span class="number">5.1</span>, <span class="number">3.1</span>)),</div><div class="line">      <span class="type">LabeledPoint</span>(<span class="number">1</span>, <span class="type">Vectors</span>.dense(<span class="number">9.2</span>, <span class="number">9.2</span>, <span class="number">9.2</span>))</div><div class="line">    )</div><div class="line">    <span class="keyword">val</span> oriDataSetRdd = sc.parallelize(oriDataSet)</div><div class="line"> </div><div class="line">    <span class="comment">// 将原始数据集按照比例切分为训练集和测试集</span></div><div class="line">    <span class="keyword">val</span> splitsDataSet = oriDataSetRdd.randomSplit(splitRatioArray)</div><div class="line">    <span class="keyword">val</span> trainDataSet = splitsDataSet(<span class="number">0</span>).cache()</div><div class="line">    <span class="keyword">val</span> testDataSet = splitsDataSet(<span class="number">1</span>).cache()</div><div class="line"> </div><div class="line">    println(<span class="string">"LogisticRegressionModel Start"</span>)</div><div class="line"> </div><div class="line">    <span class="keyword">val</span> lrModel = <span class="type">LogisticRegressionWithSGD</span>.train(trainDataSet, numIterations)</div><div class="line"> </div><div class="line">    println(<span class="string">"The LRModel's intercept is: "</span> + lrModel.intercept.toString)</div><div class="line">    println(<span class="string">"The LRModel's weights is: "</span>)</div><div class="line">    println(lrModel.weights.toString())</div><div class="line"> </div><div class="line">    <span class="comment">// 检验模型的效果</span></div><div class="line">    <span class="keyword">val</span> predcitAndTrueLabelPairs = testDataSet.map&#123; point =&gt;</div><div class="line">      (lrModel.predict(point.features), point.label)</div><div class="line">    &#125;</div><div class="line"> </div><div class="line">    <span class="keyword">val</span> lrTotalCorrect = predcitAndTrueLabelPairs.map&#123; labelPair =&gt;</div><div class="line">      <span class="keyword">if</span> (labelPair._1 == labelPair._2) <span class="number">1</span> <span class="keyword">else</span> <span class="number">0</span></div><div class="line">    &#125;.sum</div><div class="line">    <span class="keyword">val</span> irAccurate = lrTotalCorrect / testDataSet.count <span class="comment">// 准确率（结果的质量）</span></div><div class="line"> </div><div class="line">    <span class="keyword">val</span> metrics = <span class="keyword">new</span> <span class="type">BinaryClassificationMetrics</span>(predcitAndTrueLabelPairs) <span class="comment">// PR曲线（准确率-召回率）&amp; ROC 检验</span></div><div class="line">    <span class="keyword">val</span> pr = metrics.areaUnderPR()</div><div class="line">    <span class="keyword">val</span> roc = metrics.areaUnderROC()</div><div class="line"> </div><div class="line">    println(<span class="string">f"Accurate: <span class="subst">$&#123;irAccurate * 100.0&#125;</span>%2.4f%%, Area under PR: <span class="subst">$&#123;pr * 100.0&#125;</span>%2.4f%%, Area under ROC: <span class="subst">$&#123;roc * 100.0&#125;</span>%2.4f%%"</span>)</div><div class="line"> </div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/31/2015-summary/" itemprop="url">
                  2015“桔盘点”
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2015-12-31T22:18:08+08:00" content="2015-12-31">
              2015-12-31
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/31/2015-summary/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/31/2015-summary/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>进入工作的第二年，碌碌无为的一年。</p>
<h1 id="生活"><a href="#生活" class="headerlink" title="生活"></a>生活</h1><p>读书是一个很好的习惯，增长见识，开阔眼界，陶冶情操。但却没有好好坚持，时间管理得不好，没有读几本书，实在是惭愧。时间管理不好主要还是因为内心浮躁，静不下心，需要戒躁戒“精神分散多动症”。</p>
<p>电影也看得少，印象里也没去过多少次电影院，统计了下，看了17部。之前还经常会一个人跑去看电影，后来觉得这种习惯不好，会在潜意识里埋下生活凄凉的感觉，后来就很少一个人去电影院看电影了。</p>
<p>坚持写日志的习惯是一个很好的品质，写作有助于思考，而且加深思考。遗憾的是这个习惯并没有好好坚持，全年下来写了15篇日志，这15篇还是包括现在正在写的年终总结。而且文章的质量也差强人意，可读性不强。来年需要鞭策自己更多地思考，写出质量更高的文章。</p>
<p>旅游可以让人身临其境地去感受不同的风景，不同的人，不同的事物。常人言，读万卷书不如行万里路。从四月份的桂林，到六月份的日本北海道，再到年末的清远，这一年下来，出游虽然不多，但也算是走出了国门，看到发达国家不一样的风土人情，开阔了眼界。</p>
<p>闲余生活也开始学习一些投资，可惜出师不利，买港股亏得比较惨，吸取了不少教训。</p>
<h1 id="工作"><a href="#工作" class="headerlink" title="工作"></a>工作</h1><p>经历了组织架构的变化，也见惯了人来人往。所在的组在兼并了另一个组之后成立为中心，负责公司整个支付和金融线的数据支撑与数据分析和挖掘。组织架构的变化带给了整个中心更多的机遇与挑战，我的主要工作也从原先的反作弊、数据分析变成了数据建模与数据方面的开发，主要是聚焦在保险业务，所以和大家聊起工作常常笑称自己现在是一个卖保险的。因为这块工作的原因，接触了不少保险的知识，学到了一些东西。</p>
<p>经历组织架构变化到了新的组之后，面对前所未有的互联金融和大数据浪潮，可能是因为准备不足被两股大潮的同时冲击吓慌了神，工作整体上其实并不顺心，常常处于浑浑噩噩的状态，工作效率奇低。需要有所改变与突破，从手边一点一滴做起，从零开始，rework。</p>
<h1 id="运动"><a href="#运动" class="headerlink" title="运动"></a>运动</h1><p>BG每周都有五人场的足球活动，基本每周都去了。现在踢球更多在意的是锻炼与享受，年少时那种因为对胜利的渴望而产生的拼命劲早已不再。今年第一次参加了公司的足球联赛，标准十一人场的比赛实在是踢不惯，平时踢的都是五人场和八人场，这一下子直接上十一人场，感觉就傻了。第一年参加“腾超”表现一般，重在参与和享受足球的乐趣咯。部门的足球队最后拿到了殿军的成绩，有一笔奖金可以腐败一次，也是其乐融融。</p>
<p>周末有空也会去公司的健身房跑步和健身。跑步的时候常常是戴着耳机听罗辑思维，消除跑步的无聊。在跑步机跑步其实对膝盖并不好，但又懒得去旁边的深大或者荔香公园，所以一般在跑步机上跑步都不会跑太久。</p>
<p>今天一整年打了一次羽毛球，公司定的羽毛球场都是塑胶场地，很不错。荒废了很久的羽毛球，想不到重新拿起拍子还有能力假装玩得有模有样，甚是欣慰。</p>
<p>运动贵在坚持，如果有自己喜欢的运动项目那就更好了。</p>
<h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>回首过去的一年，有收获，有成长，但更多的是失落，总体而言，这一年，碌碌无为。感谢生命里出现的每一个人，无论带来的是泪水，还是欢笑，所有的一切，都是成长路上不可或缺的部分。</p>
<p>2015，见证了恒大的又一次亚洲问鼎，也亲历了无奈的遗憾。未来的2016，希望依旧“有所期待”，有所突破。心之所向，素履以往。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/img/avatar.jpg"
               alt="Jasonfu" />
          <p class="site-author-name" itemprop="name">Jasonfu</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">13</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">36</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jasonfu</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"jasonfu"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  






  
  

  

  

  

</body>
</html>
